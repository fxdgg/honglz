<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php echo $title;?></title>
<meta name="keywords" content="JD生成工具、JD生成工具-劳动光荣（北京）网络科技有限公司">
<meta name="description" content="JD生成工具、JD生成工具-劳动光荣（北京）网络科技有限公司.">
<link rel="stylesheet" href="<?php echo CSS_PATH;?>bootstrap.css" type="text/css" media="all" />
<link rel="stylesheet" href="<?php echo CSS_PATH;?>bootstrap-responsive.css" type="text/css" media="all" />
<link rel="stylesheet" href="<?php echo CSS_PATH;?>bootstrap-page.css" type="text/css" media="all" />
<style type="text/css">
<!--
*{ padding:0; margin:0}
ul,li{ list-style:none}
a{text-decoration:none;}
a:hover{text-decoration:underline;}
body,html{background: url(http://v9.help.phpcms.cn/statics/images/help_img/left-bg.png) repeat-y; font:12px/20px "tahoma,verdana,arial,sans-serif"}
h1{font-size:34px;}h2{font-size:26px; padding:8px 0 16px}h3{font-size:18px; }h4{font-size:16px;}h5{font-size:14px;}h6{font-size:12px;}
.f12{font-size: 12px}.f14{font-size: 14px}.f16{font-size: 16px}.f18{font-size:18px}.f20{font-size:20px}
.lh20{line-height: 20px}.lh22{line-height: 22px}.lh24{line-height: 24px}.lh26{line-height: 26px}.lh28{line-height: 28px}
.fb{ font-weight:bold}.fn{ font-weight:normal}
.bk,.bk3,.bk6,.bk8,.bk10,.bk15,.bk20,.bk30{clear: both;font-size: 1px;height: 0;line-height: 1px}
.bk3{height: 3px;}.bk6{height: 6px}.bk8{height: 8px}.bk10{height: 10px}.bk15{height: 15px}.bk20{height: 20px}.bk30{height: 30px}
.row-2 li{ float:left; width:50%}.row-3 li{ float:left; width:33%}.row-4 li{ float:left; width:25%}.row-5 li{ float:left; width:20%}
.cu,.cu-li li,.cu-span span {cursor: hand;!important;cursor: pointer}
.text-c{text-align: center}.text-l{text-align: left}.text-r{text-align: right}
.lf{float: left}.rt{float: right}.pr{ position:relative}.pa{ position:absolute}

.header {background: url(http://v9.help.phpcms.cn/statics/images/help_img/logo.png) no-repeat 15px center #0065b2;border-bottom: 1px solid #00508d; height:34px; line-height:34px}
.nav{ float:right; padding-right:16px;}
.nav a{ color:#e2e9ea}
.maincol{ overflow:hidden}
.col-left{ float:left; width:162px; padding:15px 8px 0; margin-right:10px}
.col-auto{ overflow:hidden;_float:left; zoom:1; padding:15px 10px 0 0; font-size:14px;line-height:25px;}

  .col-left h5{background: url(http://v9.help.phpcms.cn/statics/images/help_img/h5.png) no-repeat 0px center; padding-left:12px; }
.col-left h4{background: #cedeed url(http://v9.help.phpcms.cn/statics/images/help_img/h4.png) no-repeat 11px center; font-size:12px; font-weight:bold; padding-left:24px;height:22px; line-height:22px}
.col-left h5,.col-left h5 a,.col-left h4,.col-left h4 a{color:#405871}
.sidebar{ padding:5px 0 5px 12px}
.sidebar li{ line-height:18px;}
.sidebar li a{color:#0066dd; background: url(http://v9.help.phpcms.cn/statics/images/help_img/o.png) no-repeat left center; padding-left:8px}
.letter{ padding:10px 0}
.letter a {display:inline-block; width:26px; height:22px; line-height:21px; background:#fff; border:1px solid #e3e3e3; text-align:center; color:#333; margin-right:5px}
.letter a {background:url(http://v9.help.phpcms.cn/statics/images/help_img/pages.png) no-repeat 0 5px; font-family:Arial, Helvetica, sans-serif}
.letter a:hover { background:#f1f1f1; color:#000; text-decoration:none;}
.letter a.cur{background:#5a85b2; border:1px solid #5a85b2; color:#fff;}

.letNum{background-color: #EFEFEF; padding:3px 8px}
.letNum span{ font-size:12px; font-weight:normal}
.letList{ padding:10px}
.letList dd{ border:1px solid #eee; padding:3px 5px; color: #666; margin-bottom:8px}
.src-code {background-color:#f4f9fe;border:1px solid #e8e8e8;   font-family:'Courier New',Courier,monospace;font-weight:normal;margin:0;overflow:auto;padding:1em}
.separator {background-color:#bed0e4;height:1px;}
hr{border-color:#bed0e4;border-style:solid;height:1px;margin-bottom:10px;margin-top:10px}
.footer{ margin-left:180px; text-align:center}
ol li{margin-left:25px;list-style-type: decimal;}
blockquote{background-color:#F7F7F7;border:1px solid #CCCCCC;padding:10px;margin:10px;}
.Search{float:right; padding-right:16px;padding:5px 20px 0 0}
.Search *{ vertical-align:middle;}
.Search .text{ border:solid 1px #3987c2; background-color:#02589a; height:18px; margin-right:5px; color:#95c4e8}
.Search .button{ background:url(http://v9.help.phpcms.cn/statics/images/help_img/so.png) no-repeat; height:21px; line-height:21px; border:none; width:60px; text-indent:-200px; overflow:hidden}
-->
</style>
<link href="http://v9.help.phpcms.cn/statics/css/prettify.css" type="text/css" rel="stylesheet" /> 
<script type="text/javascript" src="http://v9.help.phpcms.cn/statics/js/prettify/prettify.js"></script>
<script type="text/javascript" src="<?php echo JS_PATH;?>jquery-1.7.1.js"></script>
<script type="text/javascript" >
function getKeywordContent(obj,id,level,kid){
    $.ajax({
        'type':'POST',
        'url':'<?php echo APP_SITE_URL;?>/jdtools/random_jd_content',
        'data':"id="+id+"&level="+level+"&kid="+kid,
        'dataType':'json',
        success:function(data){
            var isExists = jQuery("#exists_" + kid).val();
            if (isExists == undefined || isExists == 0)
            {
                var $jqLastTr = jQuery("#show_table_id tr:last-child");   //获得最后一个tr的对象
                var lastTrVal = $jqLastTr.find(".td_num").text();   //获得最后一个tr的序号
                var randomHtml = '<tr id="tr_'+data.id+'">'+
                    '<td id="td1_'+data.id+'" class="td_num" style="display:none;">'+(Number(lastTrVal)+1)+'</td>'+
                    '<td style="text-align:left">'+
                        '<a href="#" onclick="randomJdContent(this,'+id+','+level+','+kid+','+data.id+');">换个描述</a>&nbsp;&nbsp;<a href="#" onclick="editTrCommand(this,'+data.id+');">编辑</a>&nbsp;&nbsp;<a href="#" onclick="prevMoveTrCommand(this,'+data.id+');">上移</a>&nbsp;&nbsp;<a href="#" onclick="nextMoveTrCommand(this,'+data.id+');">下移</a>&nbsp;&nbsp;<a href="#" onclick="removeTrOpra(this,'+data.id+','+data.kid+');">删除</a>'+
                    '</td>'+
                    '<td id="td2_+data.id+" >'+
                        '<table cellspace="" cellpadding="" width="100%" class="">'+
                                '<tr>'+
                                    '<td style="text-align:left">'+
                                        '<input id="exists_'+kid+'" name="exists_'+kid+'" type="hidden" value="1" />'+
                                        '<input id="change_'+data.id+'" name="change_'+data.id+'" type="hidden" value="0" />'+
                                        '<input id="moveid_'+data.id+'" type="hidden" value="'+data.id+'" />'+
                                        '<textarea style="width:800px;height:50px" name="content['+data.id+']" id="content_'+data.id+'" readonly="true" onblur="onBlurCommand(this,'+data.id+')">'+data.content+'</textarea>'+
                                    '</td>'+
                                 '</tr>'+
                        '</table>'+
                    '</td>'+
                '</tr>';
                jQuery("#show_table_id").append(randomHtml);
            }
        }
    });
}
//点击换描述
function randomJdContent(obj,id,level,kid,aid){
    $.ajax({
        'type':'POST',
        'url':'<?php echo APP_SITE_URL;?>/jdtools/random_jd_content',
        'data':"id="+id+"&level="+level+"&kid="+kid+"&aid="+aid,
        'dataType':'json',
        success:function(data){
            var currentTrId = jQuery(obj).parent().parent().attr('id');  //获得本身tr的序号
            var tdNum = jQuery(obj).parent().parent().find(".td_num").text();  //获得本身td_num的序号
            var randomHtml = '<td id="td1_'+data.id+'" class="td_num" style="display:none;">'+tdNum+'</td>'+
                    '<td style="text-align:left">'+
                        '<a href="#" onclick="randomJdContent(this,'+id+','+level+','+kid+','+data.id+');">换个描述</a>&nbsp;&nbsp;<a href="#" onclick="editTrCommand(this,'+data.id+');">编辑</a>&nbsp;&nbsp;<a href="#" onclick="prevMoveTrCommand(this,'+data.id+');">上移</a>&nbsp;&nbsp;<a href="#" onclick="nextMoveTrCommand(this,'+data.id+');">下移</a>&nbsp;&nbsp;<a href="#" onclick="removeTrOpra(this,'+data.id+','+data.kid+');">删除</a>'+
                    '</td>'+
                    '<td id="td2_+data.id+" >'+
                        '<table cellspace="" cellpadding="" width="100%" class="">'+
                                '<tr>'+
                                    '<td style="text-align:left">'+
                                        '<input id="exists_'+kid+'" name="exists_'+kid+'" type="hidden" value="1" />'+
                                        '<input id="change_'+data.id+'" name="change_'+data.id+'" type="hidden" value="0" />'+
                                        '<input id="moveid_'+data.id+'" type="hidden" value="'+data.id+'" />'+
                                        '<textarea style="width:800px;height:50px" name="content['+data.id+']" id="content_'+data.id+'" readonly="true" onblur="onBlurCommand(this,'+data.id+')">'+data.content+'</textarea>'+
                                    '</td>'+
                                 '</tr>'+
                        '</table>'+
                    '</td>';
            jQuery("#"+currentTrId).html(randomHtml);
        }
    });
}
//上移指令
/*function prevMoveTrCommand(obj,oldpos){
    var pos = jQuery("#moveid_" + oldpos).val();
    //alert('movieid_up=>'+pos);
    var $jqFirstTr = jQuery("#show_table_id tr:first-child");   //获得第一个tr的对象
    var firstTrVal = $jqFirstTr.find(".td_num").text();   //获得第一个tr的序号
    var objVal = jQuery("#tr_" + pos).find(".td_num").text();//jQuery(obj).parent().parent().find(".td_num").text();  //获得本身tr的序号
    //alert('firstTrVal=>'+firstTrVal);
    //alert('objVal=>'+objVal);
    //alert('pos=>'+pos);
    if(objVal <= 1){  //判断是否在把第一行向上移 objVal == firstTrVal
        return;
    }else{
        prevMoveTrOpra(obj,oldpos);   //调用上移操作方法
    }
}
//上移操作
function prevMoveTrOpra(obj,oldpos){
    var pos = jQuery("#moveid_" + oldpos).val();
    var $jqObj = jQuery("#tr_" + pos);//jQuery(obj).parent().parent();  //获得本身tr的信息
    var $trOObjt = jQuery("#hide_tr_id").append($jqObj.html());  //把本身tr放入临时信息
    var $jqSublObj = $jqObj.prev();//jQuery(obj).parent().parent().prev();   //获得上一个tr的信息
    
    var $prevTdNum = Number($jqSublObj.find(".td_num").text());
    $jqSublObj.find(".td_num").text($prevTdNum+1);    //把上一个tr序号加1
    //New Add
    jQuery("#moveid_" + $prevTdNum).val(Number($jqSublObj.find(".td_num").text()));
    $jqObj.html("").append($jqSublObj.html());   //把本身tr清空并插入上一个信息
    $trOObjt.find(".td_num").text(Number($trOObjt.find(".td_num").text())-1);    //把本身tr序号减1
    //New Add
    jQuery("#moveid_" + oldpos).val($trOObjt.find(".td_num").text());//Number(pos)-1
    $jqSublObj.html("").append($trOObjt.html());   //把上一个tr清空并插入临时保存的tr信息
    jQuery("#hide_tr_id").html("");   //清空临时tr信息
}
//下移指令
function nextMoveTrCommand(obj,oldpos){
    var pos = jQuery("#moveid_" + oldpos).val();
    //alert('movieid_down=>'+pos);
    var $jqLastTr = jQuery("#show_table_id tr:last-child");   //获得最后一个tr的对象
    var lastTrVal = $jqLastTr.find(".td_num").text();   //获得最后一个tr的序号
    var objVal = jQuery("#tr_" + pos).find(".td_num").text();//jQuery(obj).parent().parent().find(".td_num").text();  //获得本身tr的序号
    //alert('lastTrVal=>'+lastTrVal);
    //alert('objVal=>'+objVal);
    //alert('pos=>'+pos);
    if(objVal >= 3){  //判断是否想把最后一行往下移 objVal == lastTrVal
        return;
    }else{
        nextMoveTrOpra(obj,oldpos);    //调用下移操作方法
    }
}
//下移操作
function nextMoveTrOpra(obj,oldpos){
    var pos = jQuery("#moveid_" + oldpos).val();
    var $jqObj = jQuery("#tr_" + pos);//jQuery(obj).parent().parent();  //获得本身tr的信息
    var $trOObjt = jQuery("#hide_tr_id").html("").append($jqObj.html());  //把本身tr放入临时信息
    var $jqSiblObj = $jqObj.next();//jQuery(obj).parent().parent().next();   //获得下一个tr的信息

    var $nextTdNum = Number($jqSiblObj.find(".td_num").text());
    $jqSiblObj.find(".td_num").text($nextTdNum-1);    //把下一个tr序号减1
    //New Add
    jQuery("#moveid_" + $nextTdNum).val(Number($jqSiblObj.find(".td_num").text()));
    $jqObj.html("").append($jqSiblObj.html());   //把本身tr清空并插入下一个tr信息
    $trOObjt.find(".td_num").text(Number($trOObjt.find(".td_num").text())+1);    //把本身tr序号加1
    //New Add
    jQuery("#moveid_" + oldpos).val($trOObjt.find(".td_num").text());//Number(pos)+1
    $jqSiblObj.html("").append($trOObjt.html());   //把下一个tr清空并插入临时保存的tr信息
    jQuery("#hide_tr_id").html("");    //清空临时tr信息
}*/
//上移指令
function prevMoveTrCommand(obj){
    var $jqFirstTr = jQuery("#show_table_id tr:first-child");   //获得第一个tr的对象
    var firstTrVal = $jqFirstTr.find(".td_num").text();   //获得第一个tr的序号
    var objVal = jQuery(obj).parent().parent().find(".td_num").text();  //获得本身tr的序号
    if(objVal == firstTrVal){  //判断是否在把第一行向上移
        return;
    }else{
        prevMoveTrOpra(obj);   //调用上移操作方法
    }
}
//上移操作
function prevMoveTrOpra(obj){
    var $jqObj = jQuery(obj).parent().parent();  //获得本身tr的信息
    var $trOObjt = jQuery("#hide_tr_id").append($jqObj.html());  //把本身tr放入临时信息
    var $jqSublObj = jQuery(obj).parent().parent().prev();   //获得上一个tr的信息
    $jqSublObj.find(".td_num").text(Number($jqSublObj.find(".td_num").text())+1);    //把上一个tr序号加1
    $jqObj.html("").append($jqSublObj.html());   //把本身tr清空并插入上一个信息
    $trOObjt.find(".td_num").text(Number($trOObjt.find(".td_num").text())-1);    //把本身tr序号减1
    $jqSublObj.html("").append($trOObjt.html());   //把上一个tr清空并插入临时保存的tr信息
    jQuery("#hide_tr_id").html("");   //清空临时tr信息
}
//下移指令
function nextMoveTrCommand(obj){
    var $jqLastTr = jQuery("#show_table_id tr:last-child");   //获得最后一个tr的对象
    var lastTrVal = $jqLastTr.find(".td_num").text();   //获得最后一个tr的序号
    var objVal = jQuery(obj).parent().parent().find(".td_num").text();  //获得本身tr的序号
    if(objVal == lastTrVal){  //判断是否想把最后一行往下移
        return;
    }else{
        nextMoveTrOpra(obj);    //调用下移操作方法
    }
}
//下移操作
function nextMoveTrOpra(obj){
    var $jqObj = jQuery(obj).parent().parent();  //获得本身tr的信息
    var $trOObjt = jQuery("#hide_tr_id").append($jqObj.html());  //把本身tr放入临时信息
    var $jqSiblObj = jQuery(obj).parent().parent().next();   //获得下一个tr的信息
    
    $jqSiblObj.find(".td_num").text(Number($jqSiblObj.find(".td_num").text())-1);    //把下一个tr序号减1
    $jqObj.html("").append($jqSiblObj.html());   //把本身tr清空并插入下一个tr信息
    $trOObjt.find(".td_num").text(Number($trOObjt.find(".td_num").text())+1);    //把本身tr序号加1
    $jqSiblObj.html("").append($trOObjt.html());   //把下一个tr清空并插入临时保存的tr信息
    jQuery("#hide_tr_id").html("");    //清空临时tr信息
}
//编辑
function editTrCommand(obj,pos){
    $("#change_" + pos).val(1);
    $("#content_" + pos).removeAttr("readonly");
}
//删除
function removeTrOpra(obj,aid,kid){
    var currentTrId = jQuery(obj).parent().parent().attr('id');  //获得本身tr的序号
    $("#" + currentTrId).html('');
}
//离开光标
function onBlurCommand(obj,pos){
    $("#content_" + pos).attr("readonly", true);
}
</script>
</head>

<body onload="prettyPrint()">
    <div class="header2">
        <span class="nav"></span>
    </div>
    <a name="top"></a>
    <div class="col-left">
         <h5>要求关键词</h5>
         <ul class="sidebar">
            <?php echo $keyword_content;?>
        </ul>
    </div>
    <div class="col-auto">
        <h2>任职要求：</h2>
        <table id="hide_table_id" style="display:none;"><tr id="hide_tr_id"></tr></table>
        <form method="post" id="userform" name="userform" class="horizontal" enctype='multipart/form-data' onsubmit="return true;" action="<?php echo APP_SITE_DOMAIN.$_SERVER['REQUEST_URI'];?>">
        <table cellspace="" cellpadding="" width="100%" class="" id="show_table_id">
            <?php
                $tr_content = '';
                if (!empty($describeList))
                {
                    $key = 0;
                    foreach ($describeList as $key_kid => $value)
                    {
                        $p = ++$key;
                        $aid = $value['id'];
                        $kid = $value['kid'];
                        $tr_content .= '<tr id="tr_' . $aid . '">
                            <td id="td1_' . $aid.'" class="td_num" style="display:none;">' . $p . '</td>
                            <td style="text-align:left">
                                <a href="#" onclick="randomJdContent(this,'.$id.','.$level.','.$kid.','.$aid.');">换个描述</a>&nbsp;&nbsp;<a href="#" onclick="editTrCommand(this,'.$aid.');">编辑</a>&nbsp;&nbsp;<a href="#" onclick="prevMoveTrCommand(this,'.$aid.');">上移</a>&nbsp;&nbsp;<a href="#" onclick="nextMoveTrCommand(this,'.$aid.');">下移</a>&nbsp;&nbsp;<a href="#" onclick="removeTrOpra(this,'.$aid.','.$kid.');">删除</a>
                            </td>
                            <td id="td2_' . $aid.'" >
                                <table cellspace="" cellpadding="" width="100%" class="">
                                        <tr>
                                            <td style="text-align:left">
                                                <input id="exists_'.$kid.'" name="exists_'.$kid.'" type="hidden" value="1" />
                                                <input id="change_'.$aid.'" name="change_'.$aid.'" type="hidden" value="0" />
                                                <input id="moveid_'.$aid.'" type="hidden" value="'.$aid.'" />
                                                <textarea style="width:800px;height:50px" name="content['.$aid.']" id="content_' . $aid . '" readonly="true" onblur="onBlurCommand(this,'.$aid.')">' . $value['content'] . '</textarea>
                                            </td>
                                         </tr>
                                </table>
                            </td>
                        </tr>';
                    }
                }
                echo $tr_content;
            ?>
        </table>
        <table cellspace="" cellpadding="" width="100%">
            <tr>
                <td style="text-align:center"><input type="submit" name="submit" class="btn btn-primary" value="下一步" /></td>
            </tr>
        </table>
        </form>
    </div>
    <div class="clear"></div>
    <div class="footer">劳动光荣（北京）网络科技有限公司</div>
</body>
</html>