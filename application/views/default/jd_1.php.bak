<!DOCTYPE html>
<html>
<head>
<title><?php echo $title;?></title>
<link rel="shortcut icon" href="<?php echo IMAGE_PATH;?>favicon.ico" />
<meta name="Keywords" content="职位描述,招聘,HR,人力资源,JD,奔跑吧JD" />
<meta name="Description" content="只需点点鼠标，改改文字，即可快速生成内容详实的职位描述。涵盖全行业全职位，职位描述的内容依据大数据挖掘不断优化！" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="utf-8" />
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache, must-revalidate">
<meta http-equiv="expires" content="Mon, 23 Jan 1978 20:52:30 GMT">
<meta name="robots" content="all" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="<?php echo CSS_PATH;?>jd_css.css" type="text/css"/>
<link rel="stylesheet" href="<?php echo CSS_PATH;?>chosen.css">
<script type="text/javascript" src="<?php echo JS_PATH;?>jquery-1.7.1.js"></script>
<script type="text/javascript" src="<?php echo JS_PATH;?>jquery-form-2.36.js"></script>
<script type="text/javascript" src="<?php echo JS_PATH;?>bootstrap.js"></script>

<script type="text/javascript">
function submitForm(){
    //post 提交
    var company = $("#company").val();
    var position = $("#position").val();
    var level = $("#level").val();
    var email = $("#email").val();
    var emailExist = $("#emailExist").val();
    if(company == '')
    {
        document.getElementById('msg_company').innerHTML = "请填写公司名称";
        return false;
    }
    document.getElementById('msg_company').innerHTML = "";
    if(email == '')
    {
        document.getElementById('msg_email').innerHTML = "请输入正确的邮箱地址";
        return false;
    }
    /*if(emailExist == 1)
    {
        document.getElementById('msg_email').innerHTML = "请填写邮箱或邮箱已被注册";
        return false;
    }
    document.getElementById('msg_email').innerHTML = "";*/
    if(position == 0)
    {
        document.getElementById('msg_position').innerHTML = "请选择职位";
        return false;
    }
    document.getElementById('msg_position').innerHTML = "";
    /*if(level == 0)
    {
        document.getElementById('msg_level').innerHTML = "请选择职级";
        return false;
    }
    document.getElementById('msg_level').innerHTML = "";*/
    document.userform.submit();
    return true;
}
function checkEmpty(obj, labelName) {
    var objName = eval("document.all."+obj);
    if (objName.value == '') {
        document.getElementById('msg_' + obj).innerHTML = labelName;
        //objName.focus();
        return false;
    }
    document.getElementById('msg_' + obj).innerHTML = '';
    return true;
}
function checkEmail(obj, labelName) {
    var objName = eval("document.all."+obj);
    var pattern = /^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;
    if (!pattern.test(objName.value)) {
        document.getElementById('msg_mail').innerHTML = "<strong>·</strong> 请填写邮箱";
        //document.getElementById('emailExist').value = 1;
        //objName.focus();
        return false;
    }
    document.getElementById('msg_mail').innerHTML = "";
    //checkEmailExist(obj, labelName);
    return true;
}
var xmlHttpRequest;
//XmlHttpRequest对象
function createXmlHttpRequest(){
    if(window.ActiveXObject){ //如果是IE浏览器
        return new ActiveXObject("Microsoft.XMLHTTP");
    }else if(window.XMLHttpRequest){ //非IE浏览器
        return new XMLHttpRequest();
    }
}

function checkEmailExist(obj, labelName){
    var objName = eval("document.all."+obj);
    var url = "<?php echo APP_SITE_URL;?>/users/email_exist";
    var params = "email="+objName.value;
    //1.创建XMLHttpRequest组建
    xmlHttpRequest = createXmlHttpRequest();
        
    //2.设置回调函数    
    xmlHttpRequest.onreadystatechange = checkEmailExistCallback;
        
    //3.初始化XMLHttpRequest组建
    xmlHttpRequest.open("POST",url,true);
    //post请求要自己设置请求头
    xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
    //4.发送请求
    xmlHttpRequest.send(params);
}
//回调函数
function checkEmailExistCallback(){
    if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        var data = xmlHttpRequest.responseText;
        var dataObj = eval("("+data+")");
        if(dataObj.ret == 0){
            document.getElementById('msg_mail').innerHTML = "";
            document.getElementById('emailExist').value = 0;
            return true;
        }
        document.getElementById('msg_mail').innerHTML = "<strong>·</strong> 邮箱已被注册";
        document.getElementById('emailExist').value = 1;
        return false;
    }
}
</script>
</head>

<form method="post" id="userform" name="userform" class="horizontal" onSubmit="return submitForm();" action="<?php echo APP_SITE_URL;?>/j/m/<?php echo $step;?>">
<body class="index">
    <div class="main">
        <h1 class="logo"></h1>
        <form action="" method="">
            <div class="formLine"> <span class="tilte">公司：</span> <input type="text" name="company" id="company" value="<?php echo $cookie_company;?>" onblur="return checkEmpty('company', '请填写公司名称');" /> <span id="msg_company" class="warning"></span></div>
            <div class="formLine"> <span class="tilte">邮箱：</span> <input id="jdDomain" type="hidden" value="<?php echo APP_SITE_URL;?>" /><input id="emailExist" type="hidden" value="0" /><input type="text" name="email" id="email" value="<?php echo $cookie_email;?>" onblur="return checkEmail('email', 'email');" /> <span id="msg_mail" class="warning"></span></div>
            <div class="formLine2 pos" style="z-index:2">
                <span class="tilte">职位：</span> 
                <select id="position" name="position" data-placeholder="请选择职位" class="chzn-select game">
                    <option value="0"></option>
                    <?php if (!empty($positionList)): ?>
                        <?php foreach ($positionList as $item): 
                            echo '<option value="' . $item['pdid'] . '-' . $item['positionName'] . '">' . $item['positionName'] . '</option>';
                        endforeach; ?>
                    <?php endif; ?>
                </select>
            </div>
            <div class="formLine2 level" style="z-index:1;display:none;">
                <span class="tilte">职级：</span> 
                <select id="level" name="level" data-placeholder="请选择职级" class="chzn-select game">
                    <option value="0"></option>
                    <?php if (!empty($levelList)): ?>
                        <?php foreach ($levelList as $key => $level): 
                            echo '<option value="' . $key . '">' . $level . '</option>';
                        endforeach; ?>
                    <?php endif; ?>
                </select>
            </div>
            <button class="createBn"></button>
        </form>
    </div>
    <div class="footer">
        <?php echo $pageBaseList['copyright'];?>
    </div>
</body>
</form>

<script src="<?php echo JS_PATH;?>chosen.jquery.js" type="text/javascript"></script>
<span style="display:none;"><script src="http://s4.cnzz.com/stat.php?id=1254156333&web_id=1254156333" language="JavaScript"></script></span>
<script type="text/javascript">
    $(".chzn-select").chosen();
	$('.createBn').on('click',function(){
		this.form.submit();
	});
</script>
</div><!--end maincontent-->
</body>
</html>
